<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.blj.mapper.UserMapper">

    <resultMap type="com.blj.pojo.User" id="User">
        <result column="id" property="id"/>
        <result column="name" property="name"/>
        <result column="age" property="age"/>
        <result column="password" property="password"/>
        <result column="create_date" property="createDate"/>
        <result column="create_time" property="createTime"/>

    </resultMap>

    <sql id="Base_Column_List">
  id, name,age,password,create_date,create_time
</sql>

    <sql id="simple_where">
        <where>
            <if test="id!=null">and id=#{id}</if>
            <if test="name!=null and name!=''">and name=#{name}</if>
            <if test="age!=null">and age=#{age}</if>
            <if test="password!=null and password!=''">and password=#{password}</if>
            <if test="createDate!=null">and create_date=#{createDate}</if>
            <if test="createTime!=null">and create_time=#{createTime}</if>

        </where>

    </sql>

    <select id="queryList" resultMap="User">
        select
        <include refid="Base_Column_List"/>
        from t_user
        <include refid="simple_where"/>
        <if test="orderBy!=null and orderBy!=''">
            order by ${orderBy} desc
        </if>
        <if test="limit!=null">
            limit 0,${limit}
        </if>

    </select>

    <select id="queryById" resultMap="User">
    select * from  t_user where id=#{id}
    </select>

    <select id="queryCount" resultType="java.lang.Integer">
        select count(1)
        from pc_liq_record
        <include refid="simple_where"/>
    </select>

    <select id="batchSave">
        insert into t_user (  name,age,password,create_date,create_time )
        values
        <foreach collection="userList" item="item" index="index" separator=",">
            (#{item.name},#{item.age},#{item.password},#{item.createDate},#{item.createTime})
        </foreach>

    </select>

    <update id="batchUpdate" parameterType="java.util.List">
        <foreach collection="userList" item="item" index="index" open="" close="" separator=";">
            UPDATE t_user
            <set>
                age=#{item.age}
            </set>
            <where>
                id = #{item.id}
            </where>
        </foreach>
    </update>

    <update id="batchUpdateWithTwoParam" parameterType="java.util.List">
        <foreach collection="userList" item="item" index="index" open="" close="" separator=";">
            UPDATE t_user
            <set>
                age=#{item.age}
            </set>
            <where>
                id = #{id}
            </where>
        </foreach>
    </update>
</mapper>